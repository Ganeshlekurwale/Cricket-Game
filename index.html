<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>3D Cricket Game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        touch-action: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        position: relative;
      }

      /* Background animated particles */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 20% 80%,
            rgba(120, 119, 198, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(255, 119, 198, 0.3) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 40%,
            rgba(120, 219, 226, 0.3) 0%,
            transparent 50%
          );
        animation: float 6s ease-in-out infinite;
        z-index: -1;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      #gameContainer {
        position: relative;
        width: 100vw;
        height: 100vh;
      }

      /* Enhanced Header UI with glassmorphism */
      #ui {
        position: absolute;
        top: 15px;
        left: 15px;
        z-index: 100;
        color: white;
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.25),
          rgba(255, 255, 255, 0.1)
        );
        padding: 25px;
        border-radius: 20px;
        font-size: 16px;
        max-width: 280px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
        transition: all 0.3s ease;
        animation: slideInLeft 0.6s ease-out;
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      #ui:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
      }

      #ui h2 {
        margin: 0 0 20px 0;
        font-size: 24px;
        font-weight: 700;
        text-align: center;
        background: linear-gradient(45deg, #fff, #64b5f6, #81c784);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: gradientShift 3s ease infinite;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      @keyframes gradientShift {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      #ui p {
        margin: 12px 0;
        font-size: 16px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 12px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
      }

      #ui p:hover {
        background: rgba(255, 255, 255, 0.15);
        transform: translateX(5px);
      }

      #ui span {
        font-weight: 700;
        color: #64b5f6;
        font-size: 18px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      /* Enhanced Game Controls */
      #controls {
        position: absolute;
        bottom: 25px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 100;
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
        justify-content: center;
        max-width: 95vw;
        padding: 15px 20px;
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.2),
          rgba(255, 255, 255, 0.1)
        );
        border-radius: 25px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
        animation: slideInUp 0.6s ease-out;
      }

      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translate(-50%, 50px);
        }
        to {
          opacity: 1;
          transform: translate(-50%, 0);
        }
      }

      .btn {
        padding: 18px 30px;
        font-size: 18px;
        font-weight: 600;
        border: none;
        border-radius: 16px;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        color: white;
        min-width: 110px;
        touch-action: manipulation;
        position: relative;
        overflow: hidden;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        transform: translateY(0);
        background-size: 200% 200%;
        animation: gradientMove 3s ease infinite;
      }

      @keyframes gradientMove {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        transition: left 0.6s ease;
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn:hover {
        transform: translateY(-8px) scale(1.08);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
      }

      .btn:active {
        transform: translateY(-4px) scale(1.05);
        transition: all 0.1s ease;
      }

      #bat-btn {
        background: linear-gradient(135deg, #8b4513, #d2691e, #ff8c00);
        box-shadow: 0 6px 20px rgba(139, 69, 19, 0.3);
      }

      #bat-btn:hover {
        box-shadow: 0 12px 30px rgba(139, 69, 19, 0.5);
      }

      #ball-btn {
        background: linear-gradient(135deg, #ff6b6b, #ff8e53, #ffa726);
        box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
      }

      #ball-btn:hover {
        box-shadow: 0 12px 30px rgba(255, 107, 107, 0.5);
      }

      #stump-btn {
        background: linear-gradient(135deg, #ffd700, #ffa000, #ff8f00);
        box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
      }

      #stump-btn:hover {
        box-shadow: 0 12px 30px rgba(255, 215, 0, 0.5);
      }

      /* Enhanced Result Modal */
      #result {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 200;
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.25),
          rgba(255, 255, 255, 0.1)
        );
        color: white;
        padding: 40px;
        border-radius: 25px;
        font-size: 18px;
        text-align: center;
        display: none;
        max-width: 400px;
        width: 90vw;
        box-sizing: border-box;
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
        animation: modalSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1);
        }
      }

      #result::before {
        content: "";
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, #667eea, #764ba2, #667eea);
        border-radius: 25px;
        z-index: -1;
        animation: borderGlow 3s ease infinite;
      }

      @keyframes borderGlow {
        0%,
        100% {
          opacity: 0.5;
        }
        50% {
          opacity: 1;
        }
      }

      #result h3 {
        margin: 0 0 25px 0;
        font-size: 32px;
        font-weight: 700;
        background: linear-gradient(45deg, #64b5f6, #81c784, #ffb74d);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: gradientShift 3s ease infinite;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      }

      #result p {
        margin: 15px 0;
        font-size: 18px;
        color: #f0f0f0;
        font-weight: 500;
        opacity: 0.9;
      }

      #result button {
        margin-top: 25px;
        padding: 15px 35px;
        font-size: 18px;
        font-weight: 600;
        background: linear-gradient(135deg, #4caf50, #45a049, #66bb6a);
        color: white;
        border: none;
        border-radius: 15px;
        cursor: pointer;
        touch-action: manipulation;
        transition: all 0.3s ease;
        box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        position: relative;
        overflow: hidden;
      }

      #result button::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      #result button:hover::before {
        left: 100%;
      }

      #result button:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 10px 25px rgba(76, 175, 80, 0.4);
      }

      /* Enhanced Mobile Touch Controls */
      #touch-controls {
        position: absolute;
        bottom: 180px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 100;
        display: none;
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.2),
          rgba(255, 255, 255, 0.1)
        );
        padding: 18px 25px;
        border-radius: 20px;
        color: white;
        font-size: 14px;
        text-align: center;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
        animation: fadeInScale 0.6s ease-out;
      }

      @keyframes fadeInScale {
        from {
          opacity: 0;
          transform: translateX(-50%) scale(0.8);
        }
        to {
          opacity: 1;
          transform: translateX(-50%) scale(1);
        }
      }

      #touch-controls p {
        margin: 8px 0;
        color: #f0f0f0;
        font-weight: 500;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      #touch-joystick {
        position: absolute;
        bottom: 120px;
        right: 25px;
        width: 100px;
        height: 100px;
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.2),
          rgba(255, 255, 255, 0.1)
        );
        border: 2px solid rgba(255, 255, 255, 0.4);
        border-radius: 50%;
        display: none;
        z-index: 100;
        backdrop-filter: blur(15px);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
          inset 0 2px 0 rgba(255, 255, 255, 0.4);
        animation: pulseGlow 3s ease-in-out infinite;
      }

      @keyframes pulseGlow {
        0%,
        100% {
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 2px 0 rgba(255, 255, 255, 0.4),
            0 0 20px rgba(255, 255, 255, 0.2);
        }
        50% {
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 2px 0 rgba(255, 255, 255, 0.4),
            0 0 30px rgba(255, 255, 255, 0.4);
        }
      }

      #touch-joystick-knob {
        position: absolute;
        width: 40px;
        height: 40px;
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.95),
          rgba(255, 255, 255, 0.8)
        );
        border-radius: 50%;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.15s ease;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3),
          inset 0 2px 0 rgba(255, 255, 255, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.5);
      }

      /* Enhanced Loading Animation */
      .loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 150;
        color: white;
        font-size: 22px;
        text-align: center;
        background: linear-gradient(
          145deg,
          rgba(255, 255, 255, 0.25),
          rgba(255, 255, 255, 0.1)
        );
        padding: 30px;
        border-radius: 20px;
        backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        animation: loadingPulse 2s ease-in-out infinite;
      }

      @keyframes loadingPulse {
        0%,
        100% {
          transform: translate(-50%, -50%) scale(1);
        }
        50% {
          transform: translate(-50%, -50%) scale(1.05);
        }
      }

      .loading p {
        margin: 15px 0 0 0;
        font-weight: 600;
        color: #f0f0f0;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      }

      .spinner {
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top: 4px solid #64b5f6;
        border-right: 4px solid #81c784;
        border-bottom: 4px solid #ffb74d;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin: 0 auto 15px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes settingsButtonPulse {
        0%,
        100% {
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3),
            0 0 20px rgba(102, 126, 234, 0.3);
        }
        50% {
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3),
            0 0 30px rgba(102, 126, 234, 0.5);
        }
      }

      @keyframes settingsSlideIn {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Enhanced Mobile Media Queries */
      @media (max-width: 768px) {
        #ui {
          top: 10px;
          left: 10px;
          padding: 20px;
          font-size: 14px;
          max-width: 250px;
        }

        #ui h2 {
          font-size: 20px;
          margin-bottom: 15px;
        }

        #ui p {
          font-size: 14px;
          padding: 10px;
        }

        #ui span {
          font-size: 16px;
        }

        #controls {
          bottom: 20px;
          gap: 15px;
          padding: 12px 18px;
        }

        .btn {
          padding: 15px 25px;
          font-size: 16px;
          min-width: 85px;
        }

        #touch-controls {
          display: block;
          bottom: 160px;
          font-size: 13px;
          padding: 15px 20px;
        }

        #touch-joystick {
          display: block;
          width: 90px;
          height: 90px;
          bottom: 110px;
          right: 20px;
        }

        #touch-joystick-knob {
          width: 35px;
          height: 35px;
        }

        #result {
          padding: 30px;
          font-size: 16px;
          max-width: 320px;
          border-radius: 20px;
        }

        #result h3 {
          font-size: 26px;
        }

        #result p {
          font-size: 16px;
        }

        #settings-panel {
          bottom: 85px;
          right: 10px;
          min-width: 200px;
          padding: 20px;
        }

        #stats {
          top: 10px;
          right: 10px;
          padding: 12px 16px;
          font-size: 12px;
        }

        /* Improved button hover effects for mobile */
        .btn:active {
          transform: translateY(-2px) scale(1.03);
          transition: all 0.1s ease;
        }

        /* Enhanced label hover effects */
        #settings-panel label:hover {
          background: rgba(255, 255, 255, 0.15);
          transform: translateX(2px);
        }
      }

      @media (max-width: 480px) {
        #ui {
          font-size: 12px;
          max-width: 200px;
          padding: 15px;
        }

        #ui h2 {
          font-size: 18px;
        }

        #ui p {
          font-size: 12px;
          padding: 8px;
        }

        #ui span {
          font-size: 14px;
        }

        .btn {
          padding: 12px 20px;
          font-size: 14px;
          min-width: 75px;
        }

        #controls {
          gap: 12px;
          padding: 10px 15px;
        }

        #touch-joystick {
          width: 80px;
          height: 80px;
          right: 15px;
          bottom: 100px;
        }

        #touch-joystick-knob {
          width: 30px;
          height: 30px;
        }

        #result {
          padding: 25px;
          font-size: 14px;
          max-width: 300px;
        }

        #result h3 {
          font-size: 22px;
        }

        #result p {
          font-size: 14px;
        }

        #result button {
          padding: 12px 28px;
          font-size: 16px;
        }

        #settings-panel {
          bottom: 80px;
          right: 5px;
          min-width: 180px;
          padding: 18px;
        }

        #settings-btn button {
          width: 50px !important;
          height: 50px !important;
          font-size: 20px !important;
        }
      }

      /* Ultra-small screens */
      @media (max-width: 360px) {
        #ui {
          max-width: 160px;
          padding: 12px;
        }

        #ui h2 {
          font-size: 16px;
        }

        .btn {
          padding: 10px 16px;
          font-size: 13px;
          min-width: 65px;
        }

        #touch-joystick {
          width: 70px;
          height: 70px;
          right: 10px;
          bottom: 90px;
        }

        #touch-joystick-knob {
          width: 25px;
          height: 25px;
        }

        #result {
          padding: 20px;
          max-width: 280px;
        }

        #result h3 {
          font-size: 20px;
        }

        #settings-panel {
          min-width: 160px;
          padding: 15px;
        }

        #settings-btn button {
          width: 45px !important;
          height: 45px !important;
          font-size: 18px !important;
        }
      }

      /* High DPI screens */
      @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 2dppx) {
        .btn {
          border: 0.5px solid rgba(255, 255, 255, 0.2);
        }

        #ui {
          border: 0.5px solid rgba(255, 255, 255, 0.3);
        }

        #result {
          border: 0.5px solid rgba(255, 255, 255, 0.3);
        }
      }

      /* Landscape orientation for mobile */
      @media (max-height: 500px) and (orientation: landscape) {
        #ui {
          top: 5px;
          left: 5px;
          padding: 8px 12px;
          font-size: 11px;
          max-width: 140px;
        }

        #ui h2 {
          font-size: 14px;
          margin-bottom: 8px;
        }

        #controls {
          bottom: 10px;
          gap: 8px;
        }

        .btn {
          padding: 8px 12px;
          font-size: 12px;
          min-width: 60px;
        }

        #touch-joystick {
          width: 60px;
          height: 60px;
          bottom: 70px;
          right: 10px;
        }

        #touch-joystick-knob {
          width: 22px;
          height: 22px;
        }

        #touch-controls {
          bottom: 120px;
          font-size: 10px;
          padding: 8px 12px;
        }
      }
    </style>
  </head>
  <body>
    <div id="gameContainer">
      <!-- Loading Screen -->
      <div id="loading" class="loading" style="display: none">
        <div class="spinner"></div>
        <p>Loading Cricket Field...</p>
      </div>

      <!-- Game UI -->
      <div id="ui">
        <h2>üèè 3D Cricket Game</h2>
        <p>üèÜ Score: <span id="score">0</span></p>
        <p>üéØ Matches: <span id="matches">0</span></p>
        <p>üéÆ Choose your move!</p>
      </div>

      <!-- Enhanced Performance Stats -->
      <div
        id="stats"
        style="
          position: absolute;
          top: 15px;
          right: 15px;
          z-index: 100;
          color: white;
          background: linear-gradient(
            145deg,
            rgba(255, 255, 255, 0.25),
            rgba(255, 255, 255, 0.1)
          );
          padding: 15px 20px;
          border-radius: 15px;
          font-size: 13px;
          backdrop-filter: blur(15px);
          border: 1px solid rgba(255, 255, 255, 0.3);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
            inset 0 1px 0 rgba(255, 255, 255, 0.4);
          display: none;
          animation: slideInRight 0.6s ease-out;
        "
      >
        <p style="margin: 3px 0; font-weight: 600; color: #64b5f6">
          FPS: <span id="fps" style="color: #81c784">60</span>
        </p>
        <p style="margin: 3px 0; font-weight: 600; color: #64b5f6">
          Objects: <span id="objects" style="color: #81c784">3</span>
        </p>
      </div>

      <div id="touch-controls">
        <p>üëÜ Touch and drag to look around</p>
        <p>üéÆ Use virtual joystick to move</p>
      </div>

      <div id="touch-joystick">
        <div id="touch-joystick-knob"></div>
      </div>

      <div id="controls">
        <button class="btn" id="bat-btn" onclick="playGame('Bat')">
          üèè Bat
        </button>
        <button class="btn" id="ball-btn" onclick="playGame('Ball')">
          ü•é Ball
        </button>
        <button class="btn" id="stump-btn" onclick="playGame('Stump')">
          üèè Stump
        </button>
      </div>

      <!-- Enhanced Settings Panel -->
      <div
        id="settings-btn"
        style="position: absolute; bottom: 15px; right: 15px; z-index: 100"
      >
        <button
          onclick="toggleSettings()"
          style="
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2, #8e44ad);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: settingsButtonPulse 3s ease-in-out infinite;
          "
          onmouseover="this.style.transform='scale(1.1) rotate(90deg)'"
          onmouseout="this.style.transform='scale(1) rotate(0deg)'"
        >
          ‚öôÔ∏è
        </button>
      </div>

      <div
        id="settings-panel"
        style="
          position: absolute;
          bottom: 90px;
          right: 15px;
          z-index: 100;
          background: linear-gradient(
            145deg,
            rgba(255, 255, 255, 0.25),
            rgba(255, 255, 255, 0.1)
          );
          padding: 25px;
          border-radius: 20px;
          color: white;
          display: none;
          backdrop-filter: blur(15px);
          border: 1px solid rgba(255, 255, 255, 0.3);
          min-width: 220px;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5),
            inset 0 1px 0 rgba(255, 255, 255, 0.4);
          animation: settingsSlideIn 0.4s ease-out;
        "
      >
        <h4
          style="
            margin: 0 0 20px 0;
            color: #64b5f6;
            font-size: 18px;
            font-weight: 700;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
          "
        >
          üéÆ Settings
        </h4>
        <div style="margin: 15px 0">
          <label
            style="
              display: block;
              margin-bottom: 8px;
              font-size: 14px;
              font-weight: 600;
              color: #f0f0f0;
            "
            >Graphics Quality:</label
          >
          <select
            id="graphics-quality"
            onchange="updateGraphics()"
            style="
              width: 100%;
              padding: 10px;
              border-radius: 12px;
              border: 1px solid rgba(255, 255, 255, 0.3);
              background: rgba(255, 255, 255, 0.1);
              color: white;
              font-size: 14px;
              backdrop-filter: blur(5px);
            "
          >
            <option value="high" style="background: #333; color: white">
              High
            </option>
            <option
              value="medium"
              selected
              style="background: #333; color: white"
            >
              Medium
            </option>
            <option value="low" style="background: #333; color: white">
              Low
            </option>
          </select>
        </div>
        <div style="margin: 15px 0">
          <label
            style="
              display: flex;
              align-items: center;
              font-size: 14px;
              font-weight: 600;
              color: #f0f0f0;
              cursor: pointer;
              padding: 8px;
              border-radius: 10px;
              background: rgba(255, 255, 255, 0.1);
              transition: all 0.3s ease;
            "
          >
            <input
              type="checkbox"
              id="show-fps"
              onchange="toggleFPS()"
              style="margin-right: 12px; transform: scale(1.2)"
            />
            üìä Show FPS
          </label>
        </div>
        <div style="margin: 15px 0">
          <label
            style="
              display: flex;
              align-items: center;
              font-size: 14px;
              font-weight: 600;
              color: #f0f0f0;
              cursor: pointer;
              padding: 8px;
              border-radius: 10px;
              background: rgba(255, 255, 255, 0.1);
              transition: all 0.3s ease;
            "
          >
            <input
              type="checkbox"
              id="auto-rotate"
              onchange="toggleAutoRotate()"
              checked
              style="margin-right: 12px; transform: scale(1.2)"
            />
            üîÑ Auto Rotate Objects
          </label>
        </div>
      </div>

      <div id="result">
        <div id="result-text"></div>
        <button onclick="closeResult()">Play Again</button>
      </div>
    </div>

    <script>
      // Game variables
      let scene, camera, renderer, bat, ball, stumps, field;
      let score = 0;
      let matches = 0;
      let isAnimating = false;

      // Mobile detection
      let isMobile =
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
          navigator.userAgent
        );

      // Touch controls
      let touchStartX = 0,
        touchStartY = 0;
      let touchX = 0,
        touchY = 0;
      let phi = 0,
        theta = 0;
      let isJoystickActive = false;
      let joystickStartX = 0,
        joystickStartY = 0;
      let joystickX = 0,
        joystickY = 0;

      // Movement
      let moveForward = false,
        moveBackward = false,
        moveLeft = false,
        moveRight = false;

      // UI settings
      let autoRotate = true;
      let showStats = false;
      let lastTime = performance.now();
      let frameCount = 0;

      // Initialize the 3D scene
      function init() {
        // Show loading screen
        showLoading(true);

        // Create scene
        scene = new THREE.Scene();
        scene.fog = new THREE.Fog(0x87ceeb, 50, 200);

        // Create camera
        camera = new THREE.PerspectiveCamera(
          75,
          window.innerWidth / window.innerHeight,
          0.1,
          1000
        );
        camera.position.set(0, 10, 20);
        camera.lookAt(0, 0, 0);

        // Create renderer
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0x87ceeb);
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        document
          .getElementById("gameContainer")
          .appendChild(renderer.domElement);

        // Add lighting
        const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
        directionalLight.position.set(50, 50, 50);
        directionalLight.castShadow = true;
        directionalLight.shadow.mapSize.width = 2048;
        directionalLight.shadow.mapSize.height = 2048;
        scene.add(directionalLight);

        // Create cricket field
        createField();

        // Create game objects
        createBat();
        createBall();
        createStumps();

        // Setup controls
        setupControls();

        // Hide loading screen after everything is loaded
        setTimeout(() => {
          showLoading(false);
          showWelcomeMessage();
        }, 1500);

        // Start animation loop
        animate();
      }

      function showLoading(show) {
        document.getElementById("loading").style.display = show
          ? "block"
          : "none";
      }

      function showWelcomeMessage() {
        if (isMobile) {
          setTimeout(() => {
            alert(
              "üèè Welcome to 3D Cricket Game!\n\n" +
                "üëÜ Touch and drag to look around\n" +
                "üéÆ Use the virtual joystick to move\n" +
                "‚öôÔ∏è Tap settings for more options\n\n" +
                "Choose Bat, Ball, or Stump to play!"
            );
          }, 500);
        } else {
          setTimeout(() => {
            alert(
              "üèè Welcome to 3D Cricket Game!\n\n" +
                "üñ±Ô∏è Move mouse to look around\n" +
                "‚å®Ô∏è Use WASD keys to move\n" +
                "‚öôÔ∏è Click settings for more options\n\n" +
                "Choose Bat, Ball, or Stump to play!"
            );
          }, 500);
        }
      }

      function toggleSettings() {
        const panel = document.getElementById("settings-panel");
        panel.style.display = panel.style.display === "none" ? "block" : "none";
      }

      function updateGraphics() {
        const quality = document.getElementById("graphics-quality").value;
        switch (quality) {
          case "high":
            renderer.shadowMap.enabled = true;
            renderer.setPixelRatio(window.devicePixelRatio);
            break;
          case "medium":
            renderer.shadowMap.enabled = true;
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            break;
          case "low":
            renderer.shadowMap.enabled = false;
            renderer.setPixelRatio(1);
            break;
        }
      }

      function toggleFPS() {
        showStats = document.getElementById("show-fps").checked;
        document.getElementById("stats").style.display = showStats
          ? "block"
          : "none";
      }

      function toggleAutoRotate() {
        autoRotate = document.getElementById("auto-rotate").checked;
      }

      function updateFPS() {
        frameCount++;
        const now = performance.now();
        if (now - lastTime >= 1000) {
          const fps = Math.round((frameCount * 1000) / (now - lastTime));
          document.getElementById("fps").textContent = fps;
          frameCount = 0;
          lastTime = now;
        }
      }

      function createField() {
        // Create grass field
        const fieldGeometry = new THREE.PlaneGeometry(100, 100);
        const fieldMaterial = new THREE.MeshLambertMaterial({
          color: 0x00aa00,
        });
        field = new THREE.Mesh(fieldGeometry, fieldMaterial);
        field.rotation.x = -Math.PI / 2;
        field.receiveShadow = true;
        scene.add(field);

        // Create pitch
        const pitchGeometry = new THREE.PlaneGeometry(20, 4);
        const pitchMaterial = new THREE.MeshLambertMaterial({
          color: 0x8b4513,
        });
        const pitch = new THREE.Mesh(pitchGeometry, pitchMaterial);
        pitch.rotation.x = -Math.PI / 2;
        pitch.position.y = 0.01;
        scene.add(pitch);

        // Create boundary
        const boundaryGeometry = new THREE.RingGeometry(45, 50, 32);
        const boundaryMaterial = new THREE.MeshLambertMaterial({
          color: 0xffffff,
        });
        const boundary = new THREE.Mesh(boundaryGeometry, boundaryMaterial);
        boundary.rotation.x = -Math.PI / 2;
        boundary.position.y = 0.02;
        scene.add(boundary);
      }

      function createBat() {
        const batGroup = new THREE.Group();

        // Bat blade
        const bladeGeometry = new THREE.BoxGeometry(0.3, 3, 0.1);
        const bladeMaterial = new THREE.MeshLambertMaterial({
          color: 0x8b4513,
        });
        const blade = new THREE.Mesh(bladeGeometry, bladeMaterial);
        blade.position.y = 1.5;
        blade.castShadow = true;
        batGroup.add(blade);

        // Bat handle
        const handleGeometry = new THREE.CylinderGeometry(0.05, 0.05, 1);
        const handleMaterial = new THREE.MeshLambertMaterial({
          color: 0x4a4a4a,
        });
        const handle = new THREE.Mesh(handleGeometry, handleMaterial);
        handle.position.y = 3.5;
        handle.castShadow = true;
        batGroup.add(handle);

        bat = batGroup;
        bat.position.set(-8, 0, 0);
        scene.add(bat);
      }

      function createBall() {
        const ballGeometry = new THREE.SphereGeometry(0.2, 16, 16);
        const ballMaterial = new THREE.MeshLambertMaterial({ color: 0xff0000 });
        ball = new THREE.Mesh(ballGeometry, ballMaterial);
        ball.position.set(0, 0.2, 0);
        ball.castShadow = true;
        scene.add(ball);
      }

      function createStumps() {
        const stumpsGroup = new THREE.Group();

        // Create three stumps
        for (let i = 0; i < 3; i++) {
          const stumpGeometry = new THREE.CylinderGeometry(0.05, 0.05, 2);
          const stumpMaterial = new THREE.MeshLambertMaterial({
            color: 0xffd700,
          });
          const stump = new THREE.Mesh(stumpGeometry, stumpMaterial);
          stump.position.set(i * 0.3 - 0.3, 1, 0);
          stump.castShadow = true;
          stumpsGroup.add(stump);
        }

        // Create bails
        for (let i = 0; i < 2; i++) {
          const bailGeometry = new THREE.CylinderGeometry(0.02, 0.02, 0.3);
          const bailMaterial = new THREE.MeshLambertMaterial({
            color: 0xffd700,
          });
          const bail = new THREE.Mesh(bailGeometry, bailMaterial);
          bail.position.set(i * 0.3 - 0.15, 2.1, 0);
          bail.rotation.z = Math.PI / 2;
          bail.castShadow = true;
          stumpsGroup.add(bail);
        }

        stumps = stumpsGroup;
        stumps.position.set(8, 0, 0);
        scene.add(stumps);
      }

      function setupControls() {
        if (isMobile) {
          setupTouchControls();
        } else {
          setupDesktopControls();
        }
      }

      function setupTouchControls() {
        // Touch look controls
        renderer.domElement.addEventListener("touchstart", onTouchStart, {
          passive: false,
        });
        renderer.domElement.addEventListener("touchmove", onTouchMove, {
          passive: false,
        });
        renderer.domElement.addEventListener("touchend", onTouchEnd, {
          passive: false,
        });

        // Virtual joystick
        const joystick = document.getElementById("touch-joystick");
        joystick.addEventListener("touchstart", onJoystickStart, {
          passive: false,
        });
        joystick.addEventListener("touchmove", onJoystickMove, {
          passive: false,
        });
        joystick.addEventListener("touchend", onJoystickEnd, {
          passive: false,
        });
      }

      function setupDesktopControls() {
        // Mouse controls for desktop
        document.addEventListener("mousemove", onMouseMove);
        document.addEventListener("keydown", onKeyDown);
        document.addEventListener("keyup", onKeyUp);
      }

      function onTouchStart(event) {
        event.preventDefault();
        if (event.touches.length === 1) {
          touchStartX = event.touches[0].clientX;
          touchStartY = event.touches[0].clientY;
        }
      }

      function onTouchMove(event) {
        event.preventDefault();
        if (event.touches.length === 1) {
          touchX = event.touches[0].clientX - touchStartX;
          touchY = event.touches[0].clientY - touchStartY;

          const sensitivity = 0.003;
          phi -= touchX * sensitivity;
          theta -= touchY * sensitivity;

          // Limit vertical rotation
          theta = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, theta));

          updateCameraRotation();

          touchStartX = event.touches[0].clientX;
          touchStartY = event.touches[0].clientY;
        }
      }

      function onTouchEnd(event) {
        event.preventDefault();
        touchX = 0;
        touchY = 0;
      }

      function onJoystickStart(event) {
        event.preventDefault();
        event.stopPropagation();
        isJoystickActive = true;
        const rect = event.target.getBoundingClientRect();
        joystickStartX = rect.left + rect.width / 2;
        joystickStartY = rect.top + rect.height / 2;
      }

      function onJoystickMove(event) {
        if (!isJoystickActive) return;
        event.preventDefault();
        event.stopPropagation();

        const touch = event.touches[0];
        const deltaX = touch.clientX - joystickStartX;
        const deltaY = touch.clientY - joystickStartY;

        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
        const maxDistance = 25;

        if (distance < maxDistance) {
          joystickX = deltaX / maxDistance;
          joystickY = deltaY / maxDistance;
        } else {
          joystickX = (deltaX / distance) * (maxDistance / maxDistance);
          joystickY = (deltaY / distance) * (maxDistance / maxDistance);
        }

        // Update joystick knob position
        const knob = document.getElementById("touch-joystick-knob");
        knob.style.transform = `translate(${joystickX * 25 - 50}%, ${
          joystickY * 25 - 50
        }%)`;

        // Set movement flags
        moveForward = joystickY < -0.3;
        moveBackward = joystickY > 0.3;
        moveLeft = joystickX < -0.3;
        moveRight = joystickX > 0.3;
      }

      function onJoystickEnd(event) {
        event.preventDefault();
        event.stopPropagation();
        isJoystickActive = false;
        joystickX = 0;
        joystickY = 0;

        // Reset knob position
        const knob = document.getElementById("touch-joystick-knob");
        knob.style.transform = "translate(-50%, -50%)";

        // Reset movement flags
        moveForward = moveBackward = moveLeft = moveRight = false;
      }

      function onMouseMove(event) {
        // Desktop mouse controls (existing code can be added here if needed)
      }

      function onKeyDown(event) {
        switch (event.code) {
          case "KeyW":
            moveForward = true;
            break;
          case "KeyA":
            moveLeft = true;
            break;
          case "KeyS":
            moveBackward = true;
            break;
          case "KeyD":
            moveRight = true;
            break;
        }
      }

      function onKeyUp(event) {
        switch (event.code) {
          case "KeyW":
            moveForward = false;
            break;
          case "KeyA":
            moveLeft = false;
            break;
          case "KeyS":
            moveBackward = false;
            break;
          case "KeyD":
            moveRight = false;
            break;
        }
      }

      function updateCameraRotation() {
        const x = Math.sin(phi) * Math.cos(theta);
        const y = Math.sin(theta);
        const z = Math.cos(phi) * Math.cos(theta);

        const target = new THREE.Vector3(
          camera.position.x + x,
          camera.position.y + y,
          camera.position.z + z
        );

        camera.lookAt(target);
      }

      function updateCameraMovement() {
        const moveSpeed = 0.5;
        const direction = new THREE.Vector3();
        const right = new THREE.Vector3();

        // Calculate forward direction
        const forward = new THREE.Vector3(
          Math.sin(phi),
          0,
          Math.cos(phi)
        ).normalize();

        // Calculate right direction
        right.crossVectors(forward, new THREE.Vector3(0, 1, 0)).normalize();

        if (moveForward) {
          direction.add(forward);
        }
        if (moveBackward) {
          direction.sub(forward);
        }
        if (moveLeft) {
          direction.sub(right);
        }
        if (moveRight) {
          direction.add(right);
        }

        if (direction.length() > 0) {
          direction.normalize().multiplyScalar(moveSpeed);
          camera.position.add(direction);
        }
      }

      function animate() {
        requestAnimationFrame(animate);

        // Update FPS
        if (showStats) {
          updateFPS();
        }

        // Update camera movement
        updateCameraMovement();

        // Rotate objects slowly if auto-rotate is enabled
        if (!isAnimating && autoRotate) {
          bat.rotation.y += 0.01;
          ball.rotation.x += 0.02;
          ball.rotation.z += 0.01;
          stumps.rotation.y += 0.01;
        }

        renderer.render(scene, camera);
      }

      function playGame(playerChoice) {
        if (isAnimating) return;

        isAnimating = true;
        matches++;
        document.getElementById("matches").textContent = matches;

        // Generate computer choice
        const choices = ["Bat", "Ball", "Stump"];
        const computerChoice = choices[Math.floor(Math.random() * 3)];

        // Determine result
        let result;
        if (playerChoice === computerChoice) {
          result = "Tie!";
        } else if (
          (playerChoice === "Bat" && computerChoice === "Ball") ||
          (playerChoice === "Ball" && computerChoice === "Stump") ||
          (playerChoice === "Stump" && computerChoice === "Bat")
        ) {
          result = "You Win!";
          score++;
          document.getElementById("score").textContent = score;
        } else {
          result = "Computer Wins!";
        }

        // Animate the chosen objects
        animateChoice(playerChoice, computerChoice);

        // Show result after animation
        setTimeout(() => {
          showResult(playerChoice, computerChoice, result);
          isAnimating = false;
        }, 2500);
      }

      function animateChoice(playerChoice, computerChoice) {
        // Determine the type of interaction and animate accordingly
        if (playerChoice === "Ball" && computerChoice === "Stump") {
          // Ball hits stump - player wins
          animateBallHitStump();
        } else if (playerChoice === "Stump" && computerChoice === "Ball") {
          // Ball hits stump - computer wins
          animateBallHitStump();
        } else if (playerChoice === "Bat" && computerChoice === "Ball") {
          // Bat hits ball - player wins
          animateBatHitBall();
        } else if (playerChoice === "Ball" && computerChoice === "Bat") {
          // Bat hits ball - computer wins
          animateBatHitBall();
        } else if (playerChoice === "Stump" && computerChoice === "Bat") {
          // Bat breaks stump - player wins
          animateBatBreakStump();
        } else if (playerChoice === "Bat" && computerChoice === "Stump") {
          // Bat breaks stump - computer wins
          animateBatBreakStump();
        } else {
          // Same choice - tie animation
          animateTie(playerChoice);
        }
      }

      function animateBallHitStump() {
        // Reset positions
        resetObjectPositions();

        // Animate ball moving towards stumps
        const ballStartPos = { x: -10, y: 0.2, z: 0 };
        const stumpPos = { x: 8, y: 0, z: 0 };

        ball.position.set(ballStartPos.x, ballStartPos.y, ballStartPos.z);

        const duration = 1500;
        const startTime = Date.now();

        function animate() {
          const elapsed = Date.now() - startTime;
          const progress = Math.min(elapsed / duration, 1);

          if (progress < 0.7) {
            // Ball moving towards stump
            const moveProgress = progress / 0.7;
            ball.position.x =
              ballStartPos.x + (stumpPos.x - ballStartPos.x) * moveProgress;
            ball.position.y =
              ballStartPos.y + Math.sin(moveProgress * Math.PI) * 2;
            ball.rotation.x += 0.3;
            ball.rotation.z += 0.2;
          } else {
            // Impact animation
            const impactProgress = (progress - 0.7) / 0.3;
            ball.position.x = stumpPos.x;
            ball.position.y = ballStartPos.y;

            // Stumps fall back
            stumps.rotation.z = (impactProgress * Math.PI) / 4;
            stumps.position.y = -impactProgress * 0.5;

            // Ball bounces back
            ball.position.x = stumpPos.x + impactProgress * 2;
            ball.position.y =
              ballStartPos.y + Math.sin(impactProgress * Math.PI) * 1;
          }

          if (progress < 1) {
            requestAnimationFrame(animate);
          } else {
            // Reset after animation
            setTimeout(() => {
              resetObjectPositions();
            }, 500);
          }
        }

        animate();
      }

      function animateBatHitBall() {
        // Reset positions
        resetObjectPositions();

        const batStartPos = { x: -8, y: 0, z: 0 };
        const ballStartPos = { x: 0, y: 0.2, z: 0 };

        const duration = 1500;
        const startTime = Date.now();

        function animate() {
          const elapsed = Date.now() - startTime;
          const progress = Math.min(elapsed / duration, 1);

          if (progress < 0.5) {
            // Bat swinging towards ball
            const swingProgress = progress / 0.5;
            bat.rotation.z = (-swingProgress * Math.PI) / 2;
            bat.position.x = batStartPos.x + swingProgress * 6;
            bat.position.y = swingProgress * 2;
          } else if (progress < 0.7) {
            // Impact moment
            const impactProgress = (progress - 0.5) / 0.2;
            bat.rotation.z = -Math.PI / 2;
            bat.position.x = batStartPos.x + 6;
            bat.position.y = 2;

            // Ball starts flying
            ball.position.x = ballStartPos.x + impactProgress * 15;
            ball.position.y = ballStartPos.y + impactProgress * 8;
            ball.rotation.x += 0.5;
            ball.rotation.y += 0.3;
          } else {
            // Follow through
            const followProgress = (progress - 0.7) / 0.3;
            bat.rotation.z = -Math.PI / 2 + (followProgress * Math.PI) / 3;

            // Ball continues flying
            ball.position.x = ballStartPos.x + 15 + followProgress * 10;
            ball.position.y = ballStartPos.y + 8 - followProgress * 6;
            ball.rotation.x += 0.3;
            ball.rotation.y += 0.2;
          }

          if (progress < 1) {
            requestAnimationFrame(animate);
          } else {
            // Reset after animation
            setTimeout(() => {
              resetObjectPositions();
            }, 500);
          }
        }

        animate();
      }

      function animateBatBreakStump() {
        // Reset positions
        resetObjectPositions();

        const batStartPos = { x: -8, y: 0, z: 0 };
        const stumpPos = { x: 8, y: 0, z: 0 };

        const duration = 1500;
        const startTime = Date.now();

        function animate() {
          const elapsed = Date.now() - startTime;
          const progress = Math.min(elapsed / duration, 1);

          if (progress < 0.6) {
            // Bat moving towards stump
            const moveProgress = progress / 0.6;
            bat.position.x =
              batStartPos.x + (stumpPos.x - batStartPos.x) * moveProgress;
            bat.position.y = Math.sin(moveProgress * Math.PI) * 3;
            bat.rotation.z = (moveProgress * Math.PI) / 2;
          } else {
            // Impact and destruction
            const impactProgress = (progress - 0.6) / 0.4;
            bat.position.x = stumpPos.x;
            bat.position.y = 0;
            bat.rotation.z = Math.PI / 2;

            // Stumps scatter
            stumps.rotation.x = (impactProgress * Math.PI) / 2;
            stumps.rotation.y = (impactProgress * Math.PI) / 3;
            stumps.position.y = -impactProgress * 2;
            stumps.position.x = stumpPos.x + impactProgress * 3;
          }

          if (progress < 1) {
            requestAnimationFrame(animate);
          } else {
            // Reset after animation
            setTimeout(() => {
              resetObjectPositions();
            }, 500);
          }
        }

        animate();
      }

      function animateTie(choice) {
        // Both objects do a synchronized dance
        const object = getObjectByChoice(choice);
        const duration = 1500;
        const startTime = Date.now();

        function animate() {
          const elapsed = Date.now() - startTime;
          const progress = Math.min(elapsed / duration, 1);

          // Synchronized spinning and bouncing
          const bounce = Math.sin(progress * Math.PI * 4) * 2;
          object.position.y = object.position.y + bounce * 0.1;
          object.rotation.y += 0.15;

          if (choice === "Ball") {
            object.rotation.x += 0.1;
            object.rotation.z += 0.1;
          }

          if (progress < 1) {
            requestAnimationFrame(animate);
          } else {
            resetObjectPositions();
          }
        }

        animate();
      }

      function getObjectByChoice(choice) {
        switch (choice) {
          case "Bat":
            return bat;
          case "Ball":
            return ball;
          case "Stump":
            return stumps;
          default:
            return bat;
        }
      }

      function resetObjectPositions() {
        // Reset bat
        bat.position.set(-8, 0, 0);
        bat.rotation.set(0, 0, 0);

        // Reset ball
        ball.position.set(0, 0.2, 0);
        ball.rotation.set(0, 0, 0);

        // Reset stumps
        stumps.position.set(8, 0, 0);
        stumps.rotation.set(0, 0, 0);
      }

      function showResult(playerChoice, computerChoice, result) {
        const resultDiv = document.getElementById("result");
        const resultText = document.getElementById("result-text");

        resultText.innerHTML = `
          <h3>${result}</h3>
          <p>You chose: ${playerChoice}</p>
          <p>Computer chose: ${computerChoice}</p>
          <p>Score: ${score} | Matches: ${matches}</p>
        `;

        resultDiv.style.display = "block";
      }

      function closeResult() {
        document.getElementById("result").style.display = "none";
      }

      // Handle window resize
      window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });

      // Initialize the game
      init();
    </script>
  </body>
</html>
